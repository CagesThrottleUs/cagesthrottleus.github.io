# Blog Content Repository

This branch contains blog posts and content for the main application. It operates independently from the main app code.

## Directory Structure

```
blog/
├── posts/                          # MDX blog posts
│   └── YYYY-MM-DD-slug.mdx
├── thumbnails/                     # Post thumbnail images
│   ├── default.jpg                 # Default thumbnail
│   └── YYYY-MM-DD-slug.jpg         # Post-specific thumbnails
├── manifests/                      # Auto-generated (DO NOT EDIT MANUALLY)
│   ├── index.json                  # Main index with latest posts
│   ├── page-1.json                 # Paginated post lists
│   └── metadata/                   # Individual post metadata
│       └── YYYY-MM-DD-slug.json
├── scripts/
│   └── generate_manifest.py       # Manifest generator script
└── .github/workflows/
    └── update-manifest.yml         # Auto-generation workflow
```

## Creating a New Blog Post

### 1. Create MDX File

Create a new file in `posts/` following the naming convention:

```
posts/YYYY-MM-DD-your-post-slug.mdx
```

Example: `posts/2024-11-29-hello-world.mdx`

### 2. Add Frontmatter

Every post must start with YAML frontmatter:

```mdx
---
title: YOUR POST TITLE
classification: TOP SECRET // NOFORN
abstract: Brief description of the post (1-2 sentences)
publishDate: 2024-11-29
version: 1.0
thumbnail: thumbnails/2024-11-29-your-post-slug.jpg
---

## Your content starts here...
```

#### Required Fields

- `title`: Post title (will be displayed in uppercase)
- `classification`: Security classification level
- `abstract`: Brief summary for the listing page
- `publishDate`: YYYY-MM-DD format (should match filename)
- `version`: Version number (e.g., "1.0")

#### Optional Fields

- `thumbnail`: Path to thumbnail image (defaults to `thumbnails/default.jpg`)

### 3. Write Content

Use standard Markdown with JSX support:

```mdx
## § 1.0 SECTION TITLE

Regular markdown content here.

### Subsection

- List items
- More items

Use special styling:
- <span className="redacted">[REDACTED]</span> for redacted text
- Regular **bold** and *italic*

**END OF SECTION**
```

### 4. Add Thumbnail (Optional)

Place a thumbnail image in `thumbnails/` matching your post slug:

```
thumbnails/YYYY-MM-DD-your-post-slug.svg  (preferred)
thumbnails/YYYY-MM-DD-your-post-slug.jpg
thumbnails/YYYY-MM-DD-your-post-slug.png
```

Recommended specs:
- Size: 1200x630px (Open Graph standard)
- Format: SVG (preferred - scalable, small), JPEG, or PNG
- Raster images: Max size 200KB
- Style: Cold War classified document aesthetic

### 5. Commit and Push

```bash
git add posts/YYYY-MM-DD-your-post-slug.mdx
git add thumbnails/YYYY-MM-DD-your-post-slug.jpg  # if applicable
git commit -m "feat(blog): add new post - your post title"
git push origin blog
```

The GitHub Action will automatically:
1. Detect the change in `posts/`
2. Run `generate_manifest.py`
3. Update all manifest files
4. Commit the updated manifests

## Manifest Generation

### Automatic

Manifests are automatically generated by GitHub Actions when you push changes to `posts/`.

### Manual

To manually regenerate manifests:

```bash
python scripts/generate_manifest.py
```

Then commit the changes:

```bash
git add manifests/
git commit -m "chore(manifest): update manifests"
git push origin blog
```

## Manifest Structure

### index.json

Lightweight index containing:
- Total post count
- Number of pages
- Latest 10 posts (for previews)
- Links to paginated manifest files

### page-X.json

Contains 50 posts per page with full metadata.

### metadata/YYYY-MM-DD-slug.json

Individual metadata files for each post (allows fetching single post data).

## Styling Guidelines

Follow the "Cold War classified document" aesthetic:

- Use classification markings: `TOP SECRET // NOFORN`, `CLASSIFIED`, etc.
- Structure content with section markers: `§ 1.0`, `§ 2.0`
- Use redacted spans for censored information
- Include mission-style language
- End sections with formal closings

## Tips

1. **Naming**: Use descriptive slugs: `2024-11-29-implementing-blog-system` not `2024-11-29-post1`
2. **Abstracts**: Keep under 160 characters for optimal display
3. **Images**: Reference images from `thumbnails/` directory
4. **Testing**: Check the live site after pushing to verify rendering
5. **Dates**: Use the actual publish date, not future dates

## Architecture

This branch is fetched at runtime by the main app via GitHub's raw content API:

```
https://raw.githubusercontent.com/cagesthrottleus/cagesthrottleus.github.io/blog/manifests/index.json
https://raw.githubusercontent.com/cagesthrottleus/cagesthrottleus.github.io/blog/posts/2024-11-29-hello-world.mdx
```

No authentication required (public repository).
Content is cached client-side with 5-minute TTL.

## Troubleshooting

**Manifests not updating?**
- Check GitHub Actions tab for workflow status
- Ensure you pushed to the `blog` branch
- Verify `posts/**` path was modified

**Post not appearing?**
- Verify frontmatter is valid YAML
- Check that `title` field is present
- Ensure file ends with `.mdx`
- Check manifest generation output in Actions logs

**Images not loading?**
- Verify thumbnail path in frontmatter
- Ensure image exists in `thumbnails/`
- Check image file extension matches path

